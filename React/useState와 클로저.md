## useState와 클로저

### React Hook에서의 useState

React는 상태가 변경되면 변경되었음을 컴포넌트에 알려주고, 변경된 상태를 반영해서 컴포넌트가 리렌더링 된다.

React Hook에서는 useState라는 Hook을 통해 컴포넌트 내의 상태를 관리한다.

useState는 초기값을 받아서 [상태, 상태값을 변경하는 함수] 형태의 배열을 반환한다.

```
const [state, setState] = useState(initialValue)
```

함수형 컴포넌트에서 **이전 상태와 현 상태의 변경이 있는지를 감지**하기 위해서는 **함수가 실행되었을 때 이전 상태에 대한 정보를 가지고 있어야하는데**, React는 이 과정에서 **클로저**를 사용한다.

---

<br />

<img width="390" alt="images_ggong_post_ddea9159-4d73-45a0-b2f0-268648785372_스크린샷 2021-05-22 오후 8 56 29" src="https://github.com/yookeunbyul/cs-study/assets/91243651/3f805cc3-5a98-4f20-95e1-590acfdb82fa">

useState 함수를 뜯어보면 결국 **전역에 선언된 current라는 값을 담은 변수를 사용**한다.

useState는 **외부에 선언된 상태값에 접근해서 이전 상태를 가져오고, 변경된 상태값을 관리**하고 있다.

**함수이기에 클로저를 통해 선언될 때 접근 가능했던 외부 상태값에 계속 접근할 수 있는 것이다.**

함수형 컴포넌트에서 상태값을 변경하면 외부의 값이 변경되고, 리렌더링(=함수 재호출)을 통해 새로운 값을 받아오게 된다.

---

### 정리

**React에서 함수형 컴포넌트의 상태관리를 위해서는 컴포넌트 외부에 저장된 값을 사용하며, 클로저를 통해 해당 값에 접근해 상태를 비교하고 변경한다.**

useState는 컴포넌트 내부에서 값을 변경시키는 것이 아니라, 외부에 있는 값을 변경시키기 때문에 상태가 변경된 직후 컴포넌트가 가진 값은 **이전의 값을 그대로 참조**한다.

각 컴포넌트의 상태 정보는 배열 형태로 저장되기 때문에 상태를 변화시키는 hook을 조건문이나 반복문 안에서 사용하면 잘못된 순서의 값을 참조하게 될 수 있다.

---

### 출처

https://velog.io/@ggong/useState-Hook%EA%B3%BC-%ED%81%B4%EB%A1%9C%EC%A0%80
