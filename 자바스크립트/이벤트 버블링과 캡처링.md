### 이벤트 버블링과 캡처링

### 이벤트란?

어떤 사건, 을 의미한다.

브라우저에서 사건이란 사용자가 클릭했을 때, 스크롤을 했을 때, 무언가 입력했을 때 등의 **상호작용으로 일어나는 사건**을 의미한다.

DOM 요소와 관련이 있다.

이벤트가 발생하면 **그에 맞는 반응**을 해줘야하는데, 이벤트는 일반적으로 함수로 연결되며 이 함수를 **이벤트 핸들러**라고 한다.

```
1. 이벤트를 감지하는 이벤트 핸들러를 HTML과 연동

2. 1번에서 연동된 HTML 부분에 사용자가 어떤 행동을 하면 (예: 클릭) 이벤트가 발생

3. 이벤트 핸들러에 등록된 코드 실행
```

---

<br />

근데 만약 **HTML 요소들이 중첩**되어있다면 이벤트 핸들러는 어떻게 동작할까?

```
<html>
  <body>
    <!-- 빨간색 -->
    <div class="depth1" onClick="alert(this.className)">
      <!-- 초록색 -->
      <div class="depth2" onClick="alert(this.className)">
      	<!-- 파란색 -->
        <div class="depth3" onClick="alert(this.className)">
        </div>
      </div>
    </div>
  </body>
</html>
```

위와 같이 코드가 되어있으면 depth1을 클릭해도 2와 3이 중첩되어 있으니,

**이벤트 전파**가 이루어진다.

이처럼 이벤트가 전파되는 방식에는 **이벤트 버블링**과 **이벤트 캡쳐링**이 있다.

---

### 이벤트 버블링

이벤트 버블링이란, 이벤트가 발생한 요소부터 점점 부모 요소를 거슬러 올라가서 window(전역 객체)까지 이벤트를 전파하는 것이다.

아래에서 위로 전파.

위에서 본 코드가 바로 버블링에 해당된다. 3 => 2 => 1순으로 이벤트가 핸들러가 동작한다.

거의 모든 이벤트는 버블링 되는데, focus 이벤트와 같이 버블링 되지 않는 이벤트도 있으니 각 이벤트 특성을 정확히 알고있어야 한다.

#### 버블링을 중단시키는 방법

이벤트 객체의 메서드인 event.stopPropagation()을 사용하면 된다.

```
<html>
  <body>
    <!-- 빨간색 -->
    <div class="depth1" onClick="alert(this.className)">
      <!-- 초록색 -->
      <div class="depth2" onClick="alert(this.className); event.stopPropagation()">
        <!-- 파란색 -->
        <div class="depth3" onClick="alert(this.className)">
          depth3
        </div>
      </div>
    </div>
  </body>
</html>
```

하지만 이벤트 버블링을 막아야 하는 경우는 거의 없다.

브라우저가 이벤트 발생 의도를 알지 못하기 때문에, '사용자가 클릭하려고 의도한게 뭐지? 이건가? 이건가?' 하면서 중첩된 요소들의 이벤트가 있다면 전부 다 수행한다.

이걸 통해 모든 요소에 하나하나 이벤트 리스너를 달아줄 필요 없이 **하나에만 이벤트를 넣어주고 동작시키는 이벤트 위임이라는 것을 통해 모조리 이벤트를 줄 수 있다는 장점**도 있다.

---

### 이벤트 캡처링

버블링과 다르게 위에서 아래로, window에서 이벤트가 발생한 요소까지 이벤트를 전파하는 방식이다.

이벤트는 documnet에서 시작해 DOM 트리를 따라 event.target(이벤트가 발생한 요소)까지 내려간다.

캡처링은 실무에서 거의 쓰이지 않고, 주로 버블링 단계의 이벤트만 다뤄진다.

---

### 출처

https://jhyonhyon.tistory.com/24

https://jhyonhyon.tistory.com/23

https://velog.io/@samkong/event
