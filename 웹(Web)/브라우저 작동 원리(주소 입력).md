## 브라우저 작동 원리(주소창에 주소를 딱 입력하면)

### 브라우저란?

웹 서버와 통신하여 인터넷 사이트 및 다양한 컨텐츠를 볼 수 있도록 지원해주는 소프트웨어 프로그램이다.

<img src="https://github.com/yookeunbyul/cs-study/assets/91243651/4ed04700-adbd-49bc-af77-c8e5998d2206" />

- 사용자 인터페이스 (User Interface / UI)

  - 사용자가 보는 웹 브라우저의 화면

- 브라우저 엔진 / 레이아웃 엔진

  - **사용자 인터페이스와 렌더링 엔진 사이**의 동작을 제어한다.

  - **쿠키와 같은 로컬 데이터를 저장소에 저장**한다.

- 렌더링 엔진

  - 브라우저 엔진과 밀접히 관련된 엔진으로, **웹 페이지가 표시되는 모든 영역을 제어**한다.

  - 요청한 콘텐츠(HTML, CSS 등)를 파싱하고, **화면에 나타내는 일을 수행**한다.

- 자료 저장소 / 데이터 저장소

  - 말 그대로 자료 저장소다. 쿠키나, localStorage, IndexedDB 같이 로컬에 저장되어 좀 더 오래 유지되어야 하는 데이터들을 보관할 수 있도록 지원하는 영역이다.

- 통신 (Networking)

  - **HTTP/HTTPS 네트워크 처리**를 한다.

  - 플랫폼과 독립적인 인터페이스로, 각 플랫폼의 하부에서 실행된다.

- 자바스크립트 해석기 (JS Interpreter) / 자바스크립트 엔진

  - **스크립트(JS 코드)를 파싱(해석)할 때 사용하는 JS 엔진**이다.

  - HTML을 파싱(해석) 중 script 태그를 만나면, JS 엔진이 제어 권한을 넘겨받는다. 이 작업은 동기적으로 진행된다.(JS 엔진이 작업을 마칠 때까지 HTML에서 진행 중인 과정은 잠시 중지된다.)

- UI 백엔드 (UI Backend)

  - 기본 위젯을 그릴 때 이용한다.

  - OS의 방법을 사용한다.

---

### 주소창에 주소를 딱 입력하면

1. 주소창에 입력한 **텍스트 정보 확인**

   대부분의 브라우저는 자사의 주소창을 검색창과 동일하게 사용하고 있다.

   이럴 경우 주소창에 텍스트가 들어오면 **텍스트가 검색어인지 URL인지 우선적으로 확인**한다.

   (브라우저 엔진의 UI 스레드가 담당)

   ***

   <br />

   - 검색어이면,

     **검색 엔진과 연결** => 검색 엔진의 URL에 검색어를 포함한 주소로 **페이지를 이동**시킨다. (검색의 결과)

   - URL이면,

     브라우저 엔진에서 네트워크 스레드를 통해 **네트워크 호출을 수행**한다.

<br />

---

<br />

2. **네트워크 호출**

   왜 호출해야하나? 브라우저는 현재 화면에 보여줄 데이터가 없다.

   서버가 가지고 있기 때문에 서버와의 네트워크 통신을 통해 이러한 데이터들을 가져와야 한다.

   그럼 우선 **서버가 있는 컴퓨터의 IP 주소**를 알아야한다.

   ```
   자신의 host 파일에서 도메인 네임(naver.com)에 대응하는 IP 주소(125.209.222.142)가 있는지 우선적으로 확인한다.

   만일 없다면, 네임 서버(Name Server)에 '네이버의 IP 주소를 알려주세요' 라는 요청을 보낸다.
   ```

   IP 주소는 숫자로 되어있기 때문에 사용하기 쉽도록 도메인 네임을 사용한다.

   따라서 **도메인 네임을 IP 주소로 변환해주는 환경인 DNS(Domain Name Server)**가 반드시 필요하다.

   이 DNS를 운영하는 장치를 네임 서버 혹은 DNS 서버라고 한다.

   즉, **네임 서버는 도메인 주소에 대응하는 IP 주소를 찾아주는 역할을 수행**하는 것이다.

   ***

   그럼 이제 IP 주소를 알았으니깐 서버와 통신을 할 수 있다.

   데이터를 요청하는 HTTP Request를 보낸다.

   그럼 서버는 그 요청을 받고 문서를 찾아서 바이트 형태(텍스트)로 변환한 후, HTTP Response를 다시 보낸다.

<br />

---

<br />

3. **렌더링 프로세스**

그럼 이제 우리는 이 받은 데이터를 화면에 띄워주면 된다.

마크업 언어로 된 문서를 프로그래밍 언어가 제어할 수 있도록 HTML과 CSS를 객체 트리로 변환(파싱 과정)하고

합쳐서 렌더트리 생성 후 이를 기반으로 레이아웃, 페인트 작업을 해서 렌더링을 해주면 된다.

### 출처

https://velog.io/@sylagape1231/%EC%A3%BC%EC%86%8C%EC%B0%BD%EC%97%90-naver.com%EC%9D%84-%EC%B9%98%EB%A9%B4-%EC%9D%BC%EC%96%B4%EB%82%98%EB%8A%94-%EC%9D%BC%EC%9D%84-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%B4%EB%B3%B4%EC%9E%90
