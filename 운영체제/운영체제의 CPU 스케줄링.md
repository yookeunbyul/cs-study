## 운영체제의 CPU 스케줄링

### 스케줄링이란?

운영체제가 CPU의 **자원을 어떤 프로세스에게 할당해 줄 지 그 일정을 짜는 것**이다.

---

### Context Switching(프로세스 간)

여기서 Context란 **CPU가 프로세스를 실행하기 위한 프로세스에 대한 정보**를 말한다.

멀티프로세스 환경에서는 여러 프로세스가 동시에(?) 실행된다.

이 환경에서는 필연적으로 프로세스 간 **CPU 자원 할당 이동**이 일어날 수 밖에 없다.

이 이동 과정을 **Context Switching**이라고 하며, CPU는 기존 할당된 프로세스의 Context를 저장하고, 새로 자원을 할당할 프로세스의 Context로 교체하는 과정을 거치면서 자원을 새로운 프로세스에게 할당하게 된다.

Context Switching 중에는 CPU의 자원이 어떤 프로세스에게 할당된 상태가 아니기 때문에 CPU가 아무 일도 하지 못 한다\*. 따라서 Context Switching 과정이 너무 자주 발생하면 오히려 CPU 성능이 떨어지게 된다.

```
*특정 프로세스에 의해 CPU 자원이 점유되고는 있는데, Context Switching 중이기 때문에 실제로 사용되는 프로세스가 없는 상태인 것이다.
```

Context Switching 과정을 쓸데없이 자주 반복하지 않도록 하고, 필요한 순간에 적절하게 하도록 하는 알고리즘이 필요하다는 뜻이다. 그리고 이 알고리즘을 사용하는 주체가 바로 운영체제 스케줄러다.

---

### 스케줄링 알고리즘

어떤 프로세스에 자원을 할당할 것인가? 이걸 정해야한다..

프로세스 간 우선순위를 두고, Context Switching을 할 때 우선순위가 가장 높은 프로세스에게 CPU 자원을 할당해 주는 것이다.

우선순위를 결정하는 알고리즘이 있는데 그게 비선점 스케줄링과 선점 스케줄링으로 나눌 수 있다.

### 비선점 스케줄링

```
어떤 프로세스가 CPU를 점유하고 있다면 해당 프로세스의 작업이 완료될 때까지 다른 프로세스는 CPU를 사용할 수 없음.
```

Context Switching을 최소화할 수 있다는 장점이 있다.

다만 긴급히 처리해야하는 프로세스 처리가 불가능한 문제점이 있다.

### 선점 스케줄링

```
어떤 프로세스가 CPU를 점유하고 있을 때 우선순위가 높은 다른 프로세스가 점유를 빼앗아 CPU를 점유할 수 있음.
```

긴급히 처리되어야 할 프로세스를 처리할 수 있다는 장점이 있지만 비선점 스케줄링 방식에 비해 Context Switching이 자주 일어날 수 있다는 단점이 있다.

---

### 정리

우리는 컴퓨터를 사용할 때 수많은 프로세스를 동시에 실행하게 된다.

CPU는 한 번에 한 가지 작업만 처리할 수 있기 때문에, 이 프로세스들을 동시에 처리하(는 것처럼 보이게 하)기 위해 CPU는 어떤 프로세스에게 얼마나 많은 자원을, 얼마나 긴 시간 동안 할당해야 할 지 결정해야 한다.

**프로세스를 빠르게 번갈아 처리해서 마치 동시에 프로세스가 실행되는 것처럼 보이게 하기 위해서다.**

이를 결정하기 위한 방식, 즉 CPU 스케줄링 방식은 비선점, 선점 방식으로 분류할 수 있는 수많은 방식이 존재한다.

이전 포스팅에서 **멀티스레드의 스케줄링은 운영체제가 처리하지 않기 때문에**(운영체제는 작업 최소 단위를 프로세스라고 생각하기 때문에 프로세스만 관리?) 프로그래머가 **직접 동기화 문제에 대응**할 수 있어야 한다고 언급했었다. 그러나 CPU 스케줄링은 멀티스레드와 다르게 운영체제가 사용자도 모르는 사이 자동으로 진행하는 작업이다.

### 출처

https://velog.io/@raejoonee/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C%EC%9D%98-CPU-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%A7%81
